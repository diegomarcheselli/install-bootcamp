# MySQL

## Databses


```
mysql> SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| amon               |
| hue                |
| metastore          |
| mysql              |
| nav                |
| navms              |
| oozie              |
| performance_schema |
| rman               |
| scm                |
| sentry             |
+--------------------+
12 rows in set (0.01 sec)
```

``` 
mysql> SHOW GRANTS FOR 'scm'@'%';
+----------------------------------------------------------------------------------------------------+
| Grants for scm@%                                                                                   |
+----------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'scm'@'%' IDENTIFIED BY PASSWORD '*B294FD77E512B594F0EA3398DE8C87272B38AF5D' |
| GRANT ALL PRIVILEGES ON `scm`.* TO 'scm'@'%'                                                       |
+----------------------------------------------------------------------------------------------------+
2 rows in set (0.01 sec)

mysql> SHOW GRANTS FOR 'amon'@'%';
+-----------------------------------------------------------------------------------------------------+
| Grants for amon@%                                                                                   |
+-----------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'amon'@'%' IDENTIFIED BY PASSWORD '*B294FD77E512B594F0EA3398DE8C87272B38AF5D' |
| GRANT ALL PRIVILEGES ON `amon`.* TO 'amon'@'%'                                                      |
+-----------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)

mysql> SHOW GRANTS FOR 'rman'@'%';
+-----------------------------------------------------------------------------------------------------+
| Grants for rman@%                                                                                   |
+-----------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'rman'@'%' IDENTIFIED BY PASSWORD '*B294FD77E512B594F0EA3398DE8C87272B38AF5D' |
| GRANT ALL PRIVILEGES ON `rman`.* TO 'rman'@'%'                                                      |
+-----------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)

mysql> SHOW GRANTS FOR 'hue'@'%';
+----------------------------------------------------------------------------------------------------+
| Grants for hue@%                                                                                   |
+----------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'hue'@'%' IDENTIFIED BY PASSWORD '*B294FD77E512B594F0EA3398DE8C87272B38AF5D' |
| GRANT ALL PRIVILEGES ON `hue`.* TO 'hue'@'%'                                                       |
+----------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)

mysql> SHOW GRANTS FOR 'metastore'@'%';
+----------------------------------------------------------------------------------------------------------+
| Grants for metastore@%                                                                                   |
+----------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'metastore'@'%' IDENTIFIED BY PASSWORD '*B294FD77E512B594F0EA3398DE8C87272B38AF5D' |
| GRANT ALL PRIVILEGES ON `metastore`.* TO 'metastore'@'%'                                                 |
+----------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)

mysql> SHOW GRANTS FOR 'sentry'@'%';
+-------------------------------------------------------------------------------------------------------+
| Grants for sentry@%                                                                                   |
+-------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'sentry'@'%' IDENTIFIED BY PASSWORD '*B294FD77E512B594F0EA3398DE8C87272B38AF5D' |
| GRANT ALL PRIVILEGES ON `sentry`.* TO 'sentry'@'%'                                                    |
+-------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)

mysql> SHOW GRANTS FOR 'nav'@'%';
+----------------------------------------------------------------------------------------------------+
| Grants for nav@%                                                                                   |
+----------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'nav'@'%' IDENTIFIED BY PASSWORD '*B294FD77E512B594F0EA3398DE8C87272B38AF5D' |
| GRANT ALL PRIVILEGES ON `nav`.* TO 'nav'@'%'                                                       |
+----------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)

mysql> SHOW GRANTS FOR 'navms'@'%';
+------------------------------------------------------------------------------------------------------+
| Grants for navms@%                                                                                   |
+------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'navms'@'%' IDENTIFIED BY PASSWORD '*B294FD77E512B594F0EA3398DE8C87272B38AF5D' |
| GRANT ALL PRIVILEGES ON `navms`.* TO 'navms'@'%'                                                     |
+------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)

mysql> SHOW GRANTS FOR 'oozie'@'%';
+------------------------------------------------------------------------------------------------------+
| Grants for oozie@%                                                                                   |
+------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'oozie'@'%' IDENTIFIED BY PASSWORD '*B294FD77E512B594F0EA3398DE8C87272B38AF5D' |
| GRANT ALL PRIVILEGES ON `oozie`.* TO 'oozie'@'%'                                                     |
+------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)
```

## MySQL node, grant replication privileges for your replica node


```
mysql> GRANT REPLICATION SLAVE ON *.* TO 'root'@'ip-172-32-1-224' IDENTIFIED BY 'peperonata';
Query OK, 0 rows affected (0.02 sec)

mysql> SET GLOBAL binlog_format = 'ROW';
Query OK, 0 rows affected (0.00 sec)

mysql> FLUSH TABLES WITH READ LOCK;
Query OK, 0 rows affected (0.02 sec)

```

## show its status:


```

mysql> SHOW MASTER STATUS;
+-------------------------+----------+--------------+------------------+-------------------+
| File                    | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |
+-------------------------+----------+--------------+------------------+-------------------+
| mysql_binary_log.000005 | 53355915 |              |                  |                   |
+-------------------------+----------+--------------+------------------+-------------------+
1 row in set (0.00 sec)

```

## configure a connection to the master


```
mysql> CHANGE MASTER TO
    -> MASTER_HOST='172.32.1.224',
    -> MASTER_USER='root',
    -> MASTER_PASSWORD='peperonata',
    -> MASTER_LOG_FILE='mysql_binary_log.000005',
    -> MASTER_LOG_POS=53355915;
Query OK, 0 rows affected, 2 warnings (0.01 sec)


```

## Initiate slave operations on the replica


```

mysql> START SLAVE;
Query OK, 0 rows affected (0.00 sec)

mysql> SHOW SLAVE STATUS ;
+----------------------------------+--------------+-------------+-------------+---------------+-------------------------+---------------------+-------------------------+---------------+-------------------------+------------------+-------------------+-----------------+---------------------+--------------------+------------------------+-------------------------+-----------------------------+------------+-------------------------------------------------------------------+--------------+---------------------+-----------------+-----------------+----------------+---------------+--------------------+--------------------+--------------------+-----------------+-------------------+----------------+-----------------------+-------------------------------+---------------+---------------+----------------+-------------------------------------------------------------------+-----------------------------+------------------+--------------------------------------+----------------------------+-----------+---------------------+-------------------------+--------------------+-------------+-------------------------+--------------------------+----------------+--------------------+--------------------+-------------------+---------------+
| Slave_IO_State                   | Master_Host  | Master_User | Master_Port | Connect_Retry | Master_Log_File         | Read_Master_Log_Pos | Relay_Log_File          | Relay_Log_Pos | Relay_Master_Log_File   | Slave_IO_Running | Slave_SQL_Running | Replicate_Do_DB | Replicate_Ignore_DB | Replicate_Do_Table | Replicate_Ignore_Table | Replicate_Wild_Do_Table | Replicate_Wild_Ignore_Table | Last_Errno | Last_Error                                                        | Skip_Counter | Exec_Master_Log_Pos | Relay_Log_Space | Until_Condition | Until_Log_File | Until_Log_Pos | Master_SSL_Allowed | Master_SSL_CA_File | Master_SSL_CA_Path | Master_SSL_Cert | Master_SSL_Cipher | Master_SSL_Key | Seconds_Behind_Master | Master_SSL_Verify_Server_Cert | Last_IO_Errno | Last_IO_Error | Last_SQL_Errno | Last_SQL_Error                                                    | Replicate_Ignore_Server_Ids | Master_Server_Id | Master_UUID                          | Master_Info_File           | SQL_Delay | SQL_Remaining_Delay | Slave_SQL_Running_State | Master_Retry_Count | Master_Bind | Last_IO_Error_Timestamp | Last_SQL_Error_Timestamp | Master_SSL_Crl | Master_SSL_Crlpath | Retrieved_Gtid_Set | Executed_Gtid_Set | Auto_Position |
+----------------------------------+--------------+-------------+-------------+---------------+-------------------------+---------------------+-------------------------+---------------+-------------------------+------------------+-------------------+-----------------+---------------------+--------------------+------------------------+-------------------------+-----------------------------+------------+-------------------------------------------------------------------+--------------+---------------------+-----------------+-----------------+----------------+---------------+--------------------+--------------------+--------------------+-----------------+-------------------+----------------+-----------------------+-------------------------------+---------------+---------------+----------------+-------------------------------------------------------------------+-----------------------------+------------------+--------------------------------------+----------------------------+-----------+---------------------+-------------------------+--------------------+-------------+-------------------------+--------------------------+----------------+--------------------+--------------------+-------------------+---------------+
| Waiting for master to send event | 172.32.1.224 | root        |        3306 |            60 | mysql_binary_log.000005 |            53475058 | mysqld-relay-bin.000002 |           290 | mysql_binary_log.000005 | Yes              | No                |                 |                     |                    |                        |                         |                             |       1146 | Error executing row event: 'Table 'scm.CM_VERSION' doesn't exist' |            0 |            53355915 |          119607 | None            |                |             0 | No                 |                    |                    |                 |                   |                |                  NULL | No                            |             0 |               |           1146 | Error executing row event: 'Table 'scm.CM_VERSION' doesn't exist' |                             |                1 | 2a331ee1-2e94-11e9-9297-0266f705cb54 | /var/lib/mysql/master.info |         0 |                NULL |                         |              86400 |             |                         | 190214 20:22:10          |                |                    |                    |                   |             0 |
+----------------------------------+--------------+-------------+-------------+---------------+-------------------------+---------------------+-------------------------+---------------+-------------------------+------------------+-------------------+-----------------+---------------------+--------------------+------------------------+-------------------------+-----------------------------+------------+-------------------------------------------------------------------+--------------+---------------------+-----------------+-----------------+----------------+---------------+--------------------+--------------------+--------------------+-----------------+-------------------+----------------+-----------------------+-------------------------------+---------------+---------------+----------------+-------------------------------------------------------------------+-----------------------------+------------------+--------------------------------------+----------------------------+-----------+---------------------+-------------------------+--------------------+-------------+-------------------------+--------------------------+----------------+--------------------+--------------------+-------------------+---------------+
1 row in set (0.00 sec)

```




